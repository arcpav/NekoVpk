<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="600"
        x:Class="NekoVpk.Views.SettingsWindow"
        xmlns:vm="clr-namespace:NekoVpk.ViewModels"
        x:DataType="vm:Settings"
        Title="NekoSettings"
        Width="700" Height="600"
        WindowStartupLocation="CenterScreen"
        TransparencyLevelHint="Mica,AcrylicBlur,Blur,None"
        Background="{DynamicResource SystemRegionBrush}"
        Icon="/Assets/NekoVpk.ico">
    <Design.DataContext>
        <vm:Settings />
    </Design.DataContext>
    <ScrollViewer>
        <StackPanel Margin="16" Spacing="20">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBox Name="GameDir" Text="{Binding GameDir}" InnerLeftContent="GameDir" 
                         TextWrapping="NoWrap" Width="600" Height="32" IsUndoEnabled="True"/>
                <Button Classes="Tertiary" Height="32" Click="Browser_Click" Margin="5,0,0,0">...</Button>
            </StackPanel>
            <StackPanel Orientation="Vertical" Spacing="5">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBox Text="{Binding SteamApiKey}" 
                             InnerLeftContent="Steam Web API Key"
                             PasswordChar="{Binding ApiKeyPasswordChar}"
                             Width="600" Height="32">
                        <TextBox.InnerRightContent>
                            <ToggleButton IsChecked="{Binding IsApiKeyVisible}"
                                          Background="Transparent"
                                          BorderThickness="0"
                                          Padding="4"
                                          Margin="0,0,5,0"
                                          Cursor="Hand">
                                <ToggleButton.Content>
                                    <TextBlock Text="üëÅ" FontSize="16" VerticalAlignment="Center"/>
                                </ToggleButton.Content>
                            </ToggleButton>
                        </TextBox.InnerRightContent>
                    </TextBox>

                    <Button Classes="Tertiary" Height="32" Margin="5,0,0,0"
                            ToolTip.Tip="ÁÇπÂáªË∑≥ËΩ¨Áî≥ËØ∑È°µÈù¢"
                            Click="OpenSteamApiKey_Click">
                        <TextBlock Text="?" FontWeight="Bold"/>
                    </Button>
                </StackPanel>
                <TextBlock Text="*üåêË¶Å‰ΩøÁî®Âú®Á∫øÊêúÁ¥¢ÂäüËÉΩÂøÖÈ°ªÂ°´ÂÜôÊ≠§È°π | This is required for the online search function" 
                           Foreground="#FF5555" FontSize="11" Margin="0,2,0,0"/>
            </StackPanel>

            <Separator Height="1" Background="{DynamicResource SystemControlForegroundBaseLowBrush}" Margin="0,5"/>

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Label VerticalAlignment="Center" Margin="0,0,10,0">Compression level</Label>
                <ComboBox Name="ComboBox_CompressionLevel" Width="120" SelectedIndex="{Binding CompressionLevel}">
                    <ComboBoxItem>Fast</ComboBoxItem>
                    <ComboBoxItem>Low</ComboBoxItem>
                    <ComboBoxItem>Normal</ComboBoxItem>
                    <ComboBoxItem>High</ComboBoxItem>
                    <ComboBoxItem>Ultra</ComboBoxItem>
                </ComboBox>
            </StackPanel>
            <CheckBox IsChecked="{Binding IgnoreVpkErrors}">
                ÂøΩÁï• VPK ËØªÂèñÈîôËØØ (Ignore VPK Errors)
            </CheckBox>

            <CheckBox IsChecked="{Binding ClearSearchAfterDownload}">
                ‰∏ãËΩΩÂÆåÊàêÂêéÊ∏ÖÁ©∫ÊêúÁ¥¢Ê°Ü (Clear Searchbox After Download)
            </CheckBox>
            <Separator Height="1" Background="{DynamicResource SystemControlForegroundBaseLowBrush}" Margin="0,10"/>
            <StackPanel Spacing="10">
                <TextBlock Text="ÁïåÈù¢Â≠ó‰Ωì‰∏éÂ§ßÂ∞è (Font &amp; Size)" FontWeight="Bold"/>
                <Grid ColumnDefinitions="*, 10, Auto">
                    <ComboBox Grid.Column="0"
                              ItemsSource="{Binding InstalledFonts}" 
                              SelectedItem="{Binding UserFont}"
                              HorizontalAlignment="Stretch"
                              MaxDropDownHeight="300"
                              PlaceholderText="ÈÄâÊã©Â≠ó‰Ωì...">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" FontFamily="{Binding}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <NumericUpDown Grid.Column="2"
                                   Value="{Binding UserFontSize}"
                                   Minimum="10"
                                   Maximum="36"
                                   Increment="1"
                                   Width="120"
                                   FormatString="0 px"/>
                </Grid>
            </StackPanel>
            <StackPanel Spacing="10">
                <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                    <TextBlock Text="Êõ¥Êç¢ËÉåÊôØ (ÂÖ≥Èó≠ËÆæÁΩÆÂêéÂà∑Êñ∞) - Â°´ÂÖÖÊñπÂºè:" 
                               FontWeight="Bold" 
                               VerticalAlignment="Center"/>
                    <ComboBox SelectedIndex="{Binding BackgroundStretchIndex}" 
                              MinWidth="120"
                              VerticalAlignment="Center">
                        <ComboBoxItem Content="UniformToFill (ÈªòËÆ§)">
                            <ToolTip.Tip>
                                <TextBlock Text="‰∏ç‰ºöÂèòÂΩ¢ Ê≤°ÊúâÈªëËæπ ‰ΩÜÂõæÁâáËæπÁºò‰ºöË¢´Ë£ÅÂâ™"/>
                            </ToolTip.Tip>
                        </ComboBoxItem>

                        <ComboBoxItem Content="Uniform">
                            <ToolTip.Tip>
                                <TextBlock Text="‰∏ç‰ºöÂèòÂΩ¢ ÂÆåÊï¥ÊòæÁ§∫ ‰ΩÜÂë®Âõ¥‰ºöÊúâÈªëËæπ"/>
                            </ToolTip.Tip>
                        </ComboBoxItem>
                        <ComboBoxItem Content="Fill">
                            <ToolTip.Tip>
                                <TextBlock Text="Âº∫Âà∂Â°´Êª°Â±èÂπï ÂõæÁâá‰ºöÂèòÂΩ¢"/>
                            </ToolTip.Tip>
                        </ComboBoxItem>
                        <ComboBoxItem Content="None">
                            <ToolTip.Tip>
                                <TextBlock Text="ÂéüÂßãÂ§ßÂ∞è ‰∏çËøõË°åÁº©Êîæ"/>
                            </ToolTip.Tip>
                        </ComboBoxItem>
                    </ComboBox>
                </StackPanel>
                <Grid ColumnDefinitions="*,Auto">
                    <TextBox Text="{Binding BackgroundImagePath}" Watermark="Êé®Ëçê‰ΩøÁî®ÂàÜËæ®ÁéáÊé•ËøëÁ™óÂè£ÁöÑÂõæÁâá" IsReadOnly="True"/>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="5,0,0,0">
                        <Button Content="Êñá‰ª∂" ToolTip.Tip="ÈÄâÊã©ÂõæÁâá" 
                                Command="{Binding $parent[Window].SelectBackgroundImage}"/>
                        <Button Content="Êñá‰ª∂Â§π" ToolTip.Tip="ÈöèÊú∫Êñá‰ª∂Â§πÈáåÁöÑÂõæÁâá" 
                                Command="{Binding $parent[Window].SelectBackgroundFolder}" Margin="5,0,0,0"/>
                        <Button Content="Ê∏ÖÈô§" Command="{Binding ClearBackground}" Margin="5,0,0,0"/>
                    </StackPanel>
                </Grid>
                <TextBlock Text="{Binding BackgroundBrightness, StringFormat='ËÉåÊôØ‰∫ÆÂ∫¶: {0:0}%'}" Margin="0,5,0,0"/>
                <Slider Value="{Binding BackgroundBrightness}" 
                        Minimum="0" 
                        Maximum="100" 
                        Margin="0,0,0,10"
                        IsEnabled="{Binding BackgroundImagePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Window>